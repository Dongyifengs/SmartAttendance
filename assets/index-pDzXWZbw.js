import{d as _,c as d,j as O,o as g,h as P,m as z,w as k,b as K,e as x,L as W,f as o,n as y,k as ye,l as Q,v as X,T as Y,ak as ee,r as N,x as ve,C as he,a as T,g as M,i as Ce,F as be,R as Te,K as Se,A as F,y as se,G as D,a1 as we,a2 as Z}from"./index-8iNL8t5a.js";import{m as Ee,J as Be,e as Ne,E as Me}from"./index-C9ZLzzEa.js";import{u as te,B as $,_ as ne,w as ke,P as S,J as j,z as $e,x as oe,aC as _e,aD as Ie,T as J,E as q,y as Le,aG as Ae,ar as Oe,A,aH as Pe}from"./el-button-BAn6I0Bg.js";const xe=te({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:$([String,Object,Array])},offset:{type:$(Array),default:[0,0]},badgeClass:{type:String}}),De=_({name:"ElBadge"}),ze=_({...De,props:xe,setup(s,{expose:a}){const e=s,t=ke("badge"),i=d(()=>e.isDot?"":S(e.value)&&S(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`),r=d(()=>{var n,p,v,C,m;return[{backgroundColor:e.color,marginRight:j(-((p=(n=e.offset)==null?void 0:n[0])!=null?p:0)),marginTop:j((C=(v=e.offset)==null?void 0:v[1])!=null?C:0)},(m=e.badgeStyle)!=null?m:{}]});return a({content:i}),(n,p)=>(g(),O("div",{class:y(o(t).b())},[P(n.$slots,"default"),z(Y,{name:`${o(t).namespace.value}-zoom-in-center`,persisted:""},{default:k(()=>[K(x("sup",{class:y([o(t).e("content"),o(t).em("content",n.type),o(t).is("fixed",!!n.$slots.default),o(t).is("dot",n.isDot),o(t).is("hide-zero",!n.showZero&&e.value===0),n.badgeClass]),style:W(o(r))},[P(n.$slots,"content",{value:o(i)},()=>[ye(Q(o(i)),1)])],6),[[X,!n.hidden&&(o(i)||n.isDot||n.$slots.content)]])]),_:3},8,["name"])],2))}});var Fe=ne(ze,[["__file","badge.vue"]]);const He=$e(Fe),u={placement:"top"},ae=["primary","success","info","warning","error"],le=["top","top-left","top-right","bottom","bottom-left","bottom-right"],w="top",c=Ee({customClass:"",dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,placement:void 0,zIndex:0,grouping:!1,repeatNum:1,appendTo:oe?document.body:void 0}),Re=te({customClass:{type:String,default:c.customClass},dangerouslyUseHTMLString:{type:Boolean,default:c.dangerouslyUseHTMLString},duration:{type:Number,default:c.duration},icon:{type:_e,default:c.icon},id:{type:String,default:c.id},message:{type:$([String,Object,Function]),default:c.message},onClose:{type:$(Function),default:c.onClose},showClose:{type:Boolean,default:c.showClose},type:{type:String,values:ae,default:c.type},plain:{type:Boolean,default:c.plain},offset:{type:Number,default:c.offset},placement:{type:String,values:le,default:c.placement},zIndex:{type:Number,default:c.zIndex},grouping:{type:Boolean,default:c.grouping},repeatNum:{type:Number,default:c.repeatNum}}),Ue={destroy:()=>!0},f=ee({}),Ve=s=>(f[s]||(f[s]=ee([])),f[s]),Ge=(s,a)=>{const e=f[a]||[],t=e.findIndex(n=>n.id===s),i=e[t];let r;return t>0&&(r=e[t-1]),{current:i,prev:r}},Ze=(s,a)=>{const{prev:e}=Ge(s,a);return e?e.vm.exposed.bottom.value:0},je=(s,a,e)=>(f[e]||[]).findIndex(r=>r.id===s)>0?16:a,Je=_({name:"ElMessage"}),qe=_({...Je,props:Re,emits:Ue,setup(s,{expose:a,emit:e}){const t=s,{Close:i}=Le,r=N(!1),{ns:n,zIndex:p}=Ie("message"),{currentZIndex:v,nextZIndex:C}=p,m=N(),E=N(!1),H=N(0);let I;const ie=d(()=>t.type?t.type==="error"?"danger":t.type:"info"),ce=d(()=>{const l=t.type;return{[n.bm("icon",l)]:l&&J[l]}}),R=d(()=>t.icon||J[t.type]||""),b=d(()=>t.placement||w),ue=d(()=>Ze(t.id,b.value)),U=d(()=>je(t.id,t.offset,b.value)+ue.value),pe=d(()=>H.value+U.value),de=d(()=>b.value.includes("left")?n.is("left"):b.value.includes("right")?n.is("right"):n.is("center")),V=d(()=>b.value.startsWith("top")?"top":"bottom"),fe=d(()=>({[V.value]:`${U.value}px`,zIndex:v.value}));function L(){t.duration!==0&&({stop:I}=Ae(()=>{B()},t.duration))}function G(){I?.()}function B(){E.value=!1,Se(()=>{var l;r.value||((l=t.onClose)==null||l.call(t),e("destroy"))})}function me({code:l}){l===Me.esc&&B()}return ve(()=>{L(),C(),E.value=!0}),he(()=>t.repeatNum,()=>{G(),L()}),Be(document,"keydown",me),Ne(m,()=>{H.value=m.value.getBoundingClientRect().height}),a({visible:E,bottom:pe,close:B}),(l,ns)=>(g(),T(Y,{name:o(n).b("fade"),onBeforeEnter:ge=>r.value=!0,onBeforeLeave:l.onClose,onAfterLeave:ge=>l.$emit("destroy"),persisted:""},{default:k(()=>[K(x("div",{id:l.id,ref_key:"messageRef",ref:m,class:y([o(n).b(),{[o(n).m(l.type)]:l.type},o(n).is("closable",l.showClose),o(n).is("plain",l.plain),o(n).is("bottom",o(V)==="bottom"),o(de),l.customClass]),style:W(o(fe)),role:"alert",onMouseenter:G,onMouseleave:L},[l.repeatNum>1?(g(),T(o(He),{key:0,value:l.repeatNum,type:o(ie),class:y(o(n).e("badge"))},null,8,["value","type","class"])):M("v-if",!0),o(R)?(g(),T(o(q),{key:1,class:y([o(n).e("icon"),o(ce)])},{default:k(()=>[(g(),T(Ce(o(R))))]),_:1},8,["class"])):M("v-if",!0),P(l.$slots,"default",{},()=>[l.dangerouslyUseHTMLString?(g(),O(be,{key:1},[M(" Caution here, message could've been compromised, never use user's input as message "),x("p",{class:y(o(n).e("content")),innerHTML:l.message},null,10,["innerHTML"])],2112)):(g(),O("p",{key:0,class:y(o(n).e("content"))},Q(l.message),3))]),l.showClose?(g(),T(o(q),{key:2,class:y(o(n).e("closeBtn")),onClick:Te(B,["stop"])},{default:k(()=>[z(o(i))]),_:1},8,["class","onClick"])):M("v-if",!0)],46,["id"]),[[X,E.value]])]),_:3},8,["name","onBeforeEnter","onBeforeLeave","onAfterLeave"]))}});var Ke=ne(qe,[["__file","message.vue"]]);let We=1;const Qe=s=>{if(!s.appendTo)s.appendTo=document.body;else if(F(s.appendTo)){let e=document.querySelector(s.appendTo);Oe(e)||(e=document.body),s.appendTo=e}},Xe=s=>{!s.placement&&F(u.placement)&&u.placement&&(s.placement=u.placement),s.placement||(s.placement=w),le.includes(s.placement)||(s.placement=w)},re=s=>{const a=!s||F(s)||se(s)||D(s)?{message:s}:s,e={...c,...a};return Qe(e),Xe(e),A(u.grouping)&&!e.grouping&&(e.grouping=u.grouping),S(u.duration)&&e.duration===3e3&&(e.duration=u.duration),S(u.offset)&&e.offset===16&&(e.offset=u.offset),A(u.showClose)&&!e.showClose&&(e.showClose=u.showClose),A(u.plain)&&!e.plain&&(e.plain=u.plain),e},Ye=s=>{const a=s.props.placement||w,e=f[a],t=e.indexOf(s);if(t===-1)return;e.splice(t,1);const{handler:i}=s;i.close()},es=({appendTo:s,...a},e)=>{const t=`message_${We++}`,i=a.onClose,r=document.createElement("div"),n={...a,id:t,onClose:()=>{i?.(),Ye(m)},onDestroy:()=>{Z(null,r)}},p=z(Ke,n,D(n.message)||se(n.message)?{default:D(n.message)?n.message:()=>n.message}:null);p.appContext=e||h._context,Z(p,r),s.appendChild(r.firstElementChild);const v=p.component,m={id:t,vnode:p,vm:v,handler:{close:()=>{v.exposed.close()}},props:p.component.props};return m},h=(s={},a)=>{if(!oe)return{close:()=>{}};const e=re(s),t=Ve(e.placement||w);if(e.grouping&&t.length){const r=t.find(({vnode:n})=>{var p;return((p=n.props)==null?void 0:p.message)===e.message});if(r)return r.props.repeatNum+=1,r.props.type=e.type,r.handler}if(S(u.max)&&t.length>=u.max)return{close:()=>{}};const i=es(e,a);return t.push(i),i.handler};ae.forEach(s=>{h[s]=(a={},e)=>{const t=re(a);return h({...t,type:s},e)}});function ss(s){for(const a in f)if(we(f,a)){const e=[...f[a]];for(const t of e)(!s||s===t.props.type)&&t.handler.close()}}function ts(s){if(!f[s])return;[...f[s]].forEach(e=>e.handler.close())}h.closeAll=ss;h.closeAllByPlacement=ts;h._context=null;const rs=Pe(h,"$message");export{rs as E};
