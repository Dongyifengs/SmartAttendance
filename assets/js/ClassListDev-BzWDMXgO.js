/* empty css                  *//* empty css                 */import{a as e,b as a}from"./index-ThND04tc.js";/* empty css                        */import{v as l,j as t,k as s,m as n,n as r,i,o as u,h as o,p as _,a as y,q as k}from"./element-plus-tx2s2pn9.js";/* empty css                   */import{v as c,c as b,J as d,K as m,B as p,R as g,O as h,U as v,x as f,H as D,aa as I,I as $,y as x,r as w,o as j,a2 as S,u as M}from"./vue-vendor-CoPnbFnN.js";import{_ as Y}from"./index-30FeaZnB.js";import"./utils-BuH06i2U.js";const C=[{key:"lesson_type",label:"课程类型"},{key:"lesson_date",label:"课程日期"},{key:"selective",label:"是否选修"},{key:"week_num",label:"周次"},{key:"week_item",label:"星期序号"},{key:"week_name",label:"星期"},{key:"begin_time",label:"开始时间"},{key:"end_time",label:"结束时间"},{key:"section_num",label:"节次"},{key:"pk_anlaxy_semester",label:"学期ID"},{key:"pk_anlaxy_organize",label:"组织机构ID"},{key:"pk_group",label:"班级ID"},{key:"pk_anlaxy_timezone",label:"时区ID"},{key:"campus",label:"校区"},{key:"lesson_name",label:"课程名称"},{key:"pk_anlaxy_lesson",label:"课程ID"},{key:"teacher_id",label:"教师工号"},{key:"teacher_name",label:"教师姓名"},{key:"pk_teacher",label:"教师ID"},{key:"class_room_name",label:"教室名称"},{key:"pk_anlaxy_classroom",label:"教室ID"},{key:"pk_anlaxy_syllabus",label:"教学大纲ID"},{key:"max_count",label:"最大容量"},{key:"cur_count",label:"当前人数"}],U=[{key:"lesson_type",label:"课程类型"},{key:"pk_anlaxy_syllabus_user",label:"教学安排用户主键"},{key:"lesson_date",label:"上课日期"},{key:"user_id",label:"用户ID"},{key:"user_name",label:"学生姓名"},{key:"before_class_time",label:"课前签到时间"},{key:"begin_time",label:"上课开始时间"},{key:"after_class_time",label:"课后签到时间"},{key:"u_begin_time",label:"用户上课时间"},{key:"before_class_over_time",label:"课前结束时间"},{key:"end_time",label:"下课时间"},{key:"after_class_over_time",label:"课后结束时间"},{key:"u_end_time",label:"用户下课时间"},{key:"late_time_length",label:"迟到时长(分钟)"},{key:"leave_ago_time_length",label:"早退时长(分钟)"},{key:"absent_num",label:"缺勤次数"},{key:"late_num",label:"迟到次数"},{key:"leave_num",label:"早退次数"},{key:"ask_leave_num",label:"请假次数"},{key:"ok_num",label:"正常出勤次数"},{key:"get_num",label:"签到次数"},{key:"user_num",label:"学生人数"},{key:"section_num",label:"节次编号"},{key:"syllabus_status",label:"课程状态"},{key:"uuid",label:"唯一标识符"},{key:"srv_data",label:"服务数据"},{key:"mac",label:"MAC地址"},{key:"reviewscore",label:"评价分数"},{key:"reviewcontent",label:"评价内容"},{key:"pk_user",label:"用户ID"},{key:"pk_class",label:"班级ID"},{key:"pk_lesson",label:"课程ID"},{key:"pk_teacher",label:"教师ID"},{key:"pk_class_room",label:"教室ID"},{key:"campus",label:"校区"},{key:"pk_anlaxy_syllabus",label:"课程表主键"},{key:"teacher_pic",label:"教师头像"}],V={class:"header"},A=["onMouseenter"],H=Y(c({__name:"DataTable",props:{title:{default:"未命名表格"},data:{default:()=>[]},fields:{default:()=>[]},loading:{type:Boolean,default:!1},highlightValue:{default:void 0},type:{}},emits:["highlight","unhighlight"],setup(e,{emit:a}){const i=e,u=a,o=()=>u("unhighlight"),_=b(()=>i.fields.map(e=>{const a={label:e.label};return i.data.forEach((l,t)=>{a[t]=l[e.key]}),a}));function y(e,a){if(null==a)return"—";switch(e){case"课程类型":return 0===a?"正常排课":String(a);case"是否选修":return 0===a?"否":"是";case"迟到时长(分钟)":return 0===a?"未迟到":`迟到${a}分钟`;case"早退时长(分钟)":return 0===a?"未早退":`早退${a}分钟`;case"缺勤次数":return 0===a?"未缺勤":"已缺勤";case"迟到次数":return 0===a?"未迟到":"已迟到";case"早退次数":return 0===a?"未早退":"已早退";case"请假次数":return 0===a?"未请假":"已请假";case"正常出勤次数":return 0===a?"未出勤":"已出勤";case"签到次数":return 0===a?"未签到":"已签到";case"学生人数":case"最大容量":case"当前人数":return`${a}人`;case"节次编号":case"节次":return`第${a}节`;case"周次":return`第${a}周`;case"星期序号":return`第${a}天`;case"评价分数":return 0===a?"未打分":`${a}分`;case"评价内容":return""===a?"未打分":String(a);case"教师头像":return""===a?"没有头像":String(a);case"课程状态":return 0===a?"未知":String(a);default:return String(a)}}return(e,a)=>{const k=s,c=t,b=n,w=r,j=l;return x(),d(w,{class:"data-card"},{default:m(()=>[p("div",V,[p("h3",null,h(e.title),1)]),e.data.length?g((x(),d(c,{key:0,data:_.value,border:"",stripe:"",style:{width:"100%"}},{default:m(()=>[v(k,{label:"",prop:"label",width:"150"}),(x(!0),f(D,null,I(e.data,(a,l)=>(x(),d(k,{key:l,label:`${e.title}${l+1}`,prop:String(l)},{default:m(({row:e})=>[p("span",{class:$({highlight:i.highlightValue===e[l]}),onMouseenter:a=>{return t=e[l],u("highlight",t);var t},onMouseleave:o},h(y(e.label,e[l])),43,A)]),_:2},1032,["label","prop"]))),128))]),_:1},8,["data"])),[[j,e.loading]]):(x(),d(b,{key:1,description:0===e.data.length?"当日数据服务端未生成":"暂无信息"},null,8,["description"]))]),_:1})}}}),[["__scopeId","data-v-e502aa88"]]),K={class:"debug-page"},O={class:"toolbar"},z=Y(c({__name:"ClassListDev",setup(l){const t=w(void 0),s=e=>t.value=e,n=()=>t.value=void 0,r=w(i().toDate()),c=()=>i().format("YYYY-MM-DD"),b=w([]),d=w([]),g=w(!1),h=w(!1),D=()=>{const e=localStorage.getItem("SA-ZHKQ-USERINFO");return e?JSON.parse(e).token:""};async function I(e,a,l,t,s,n){s.value=!0;try{const s=await a({date:l,userKey:D()}),r=s[n];"1"===s.state&&Array.isArray(r)?(t.value=r,0===r.length&&y.info(`${e} 数据服务端未生成`)):(t.value=[],y.warning(`未获取到${e}信息`))}catch(r){y.error(`获取${e}失败`)}finally{s.value=!1}}const $=a=>I("课程",e,a,b,g,"sourcelist"),Y=e=>I("签到",a,e,d,h,"sign_record_list"),V=()=>{const e=r.value?i(r.value).format("YYYY-MM-DD"):c();y.success(`正在获取 ${e} 的课程与签到信息...`),$(e),Y(e)};return j(()=>{V()}),(e,a)=>{const l=u,i=o,y=k,D=_;return x(),f("div",K,[p("div",O,[v(l,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=e=>r.value=e),placeholder:"选择日期",type:"date"},null,8,["modelValue"]),v(i,{type:"primary",onClick:V},{default:m(()=>[...a[4]||(a[4]=[S("获取课程与签到信息",-1)])]),_:1}),v(i,{onClick:a[1]||(a[1]=e=>$(c()))},{default:m(()=>[...a[5]||(a[5]=[S("仅获取课程",-1)])]),_:1}),v(i,{onClick:a[2]||(a[2]=e=>Y(c()))},{default:m(()=>[...a[6]||(a[6]=[S("仅获取签到",-1)])]),_:1}),v(i,{onClick:a[3]||(a[3]=a=>e.$router.back())},{default:m(()=>[...a[7]||(a[7]=[S("返回上一页",-1)])]),_:1})]),v(D,{gutter:20,class:"table-section"},{default:m(()=>[v(y,{span:12},{default:m(()=>[v(H,{data:b.value,fields:M(C),"highlight-value":t.value,loading:g.value,title:"课程表",type:"course",onHighlight:s,onUnhighlight:n},null,8,["data","fields","highlight-value","loading"])]),_:1}),v(y,{span:12},{default:m(()=>[v(H,{data:d.value,fields:M(U),"highlight-value":t.value,loading:h.value,title:"签到信息表",type:"checkin",onHighlight:s,onUnhighlight:n},null,8,["data","fields","highlight-value","loading"])]),_:1})]),_:1})])}}}),[["__scopeId","data-v-b71a21b4"]]);export{z as default};
