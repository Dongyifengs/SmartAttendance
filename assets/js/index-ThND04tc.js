import{g as e,a as t}from"./utils-BuH06i2U.js";import{o as n,n as r,f as a,w as o,C as s,r as i,au as u,g as l,h as c,j as f,s as p,c as d,av as v,u as y}from"./vue-vendor-CoPnbFnN.js";const g="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const m=Object.prototype.toString,w=()=>{};const S=e=>e();function h(e=S,t={}){const{initialState:n="active"}=t,r=function(...e){if(1!==e.length)return s(...e);const t=e[0];return"function"==typeof t?a(u(()=>({get:t,set:w}))):i(t)}("active"===n);return{isActive:a(r),pause:function(){r.value=!1},resume:function(){r.value=!0},eventFilter:(...t)=>{r.value&&e(...t)}}}function _(e){return Array.isArray(e)?e:[e]}function b(e,t,n={}){const{eventFilter:r=S,...a}=n;return o(e,(s=r,i=t,function(...e){return new Promise((t,n)=>{Promise.resolve(s(()=>i.apply(this,e),{fn:i,thisArg:this,args:e})).then(t).catch(n)})}),a);var s,i}function A(e,t=!0,a){l()?n(e,a):t?e():r(e)}const C=g?window:void 0;function O(...e){const t=[],n=()=>{t.forEach(e=>e()),t.length=0},r=d(()=>{const t=_(v(e[0])).filter(e=>null!=e);return t.every(e=>"string"!=typeof e)?t:void 0}),a=(s=([e,r,a,o])=>{if(n(),!(null==e?void 0:e.length)||!(null==r?void 0:r.length)||!(null==a?void 0:a.length))return;const s=(i=o,"[object Object]"===m.call(i)?{...o}:o);var i;t.push(...e.flatMap(e=>r.flatMap(t=>a.map(n=>((e,t,n,r)=>(e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)))(e,t,n,s)))))},i={flush:"post"},o(()=>{var t,n;return[null!=(n=null==(t=r.value)?void 0:t.map(e=>function(e){var t;const n=v(e);return null!=(t=null==n?void 0:n.$el)?t:n}(e)))?n:[C].filter(e=>null!=e),_(v(r.value?e[1]:e[0])),_(y(r.value?e[2]:e[1])),v(r.value?e[3]:e[2])]},s,{...i,immediate:!0}));var s,i;var u;return u=n,c()&&f(u),()=>{a(),n()}}const N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},k="__vueuse_ssr_handlers__",j=D();function D(){return k in N||(N[k]=N[k]||{}),N[k]}const F={boolean:{read:e=>"true"===e,write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},I="vueuse-storage";function L(e,t,n,a={}){var s;const{flush:u="pre",deep:l=!0,listenToStorageChanges:c=!0,writeDefaults:f=!0,mergeDefaults:y=!1,shallow:g,window:m=C,eventFilter:w,onError:S=e=>{},initOnMounted:_}=a,N=(g?p:i)(t),k=d(()=>v(e));if(!n)try{n=function(e,t){return j[e]||t}("getDefaultStorage",()=>{var e;return null==(e=C)?void 0:e.localStorage})()}catch(G){S(G)}if(!n)return N;const D=v(t),L=function(e){return null==e?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":"boolean"==typeof e?"boolean":"string"==typeof e?"string":"object"==typeof e?"object":Number.isNaN(e)?"any":"number"}(D),E=null!=(s=a.serializer)?s:F[L],{pause:J,resume:M}=function(e,t,n={}){const{eventFilter:r,initialState:a="active",...o}=n,{eventFilter:s,pause:i,resume:u,isActive:l}=h(r,{initialState:a});return{stop:b(e,t,{...o,eventFilter:s}),pause:i,resume:u,isActive:l}}(N,e=>function(e){try{const t=n.getItem(k.value);if(null==e)R(t,null),n.removeItem(k.value);else{const r=E.write(e);t!==r&&(n.setItem(k.value,r),R(t,r))}}catch(G){S(G)}}(e),{flush:u,deep:l,eventFilter:w});o(k,()=>K(),{flush:u});let P=!1;const T=e=>{_&&!P||K(e.detail)};function R(e,t){if(m){const r={key:k.value,oldValue:e,newValue:t,storageArea:n};m.dispatchEvent(n instanceof Storage?new StorageEvent("storage",r):new CustomEvent(I,{detail:r}))}}function K(e){if(!e||e.storageArea===n)if(e&&null==e.key)N.value=D;else if(!e||e.key===k.value){J();try{const t=E.write(N.value);void 0!==e&&(null==e?void 0:e.newValue)===t||(N.value=function(e){const t=e?e.newValue:n.getItem(k.value);if(null==t)return f&&null!=D&&n.setItem(k.value,E.write(D)),D;if(!e&&y){const e=E.read(t);return"function"==typeof y?y(e,D):"object"!==L||Array.isArray(e)?e:{...D,...e}}return"string"!=typeof t?t:E.read(t)}(e))}catch(G){S(G)}finally{e?r(M):M()}}}return m&&c&&(n instanceof Storage?O(m,"storage",e=>{_&&!P||K(e)},{passive:!0}):O(m,I,T)),_?A(()=>{P=!0,K()}):K(),N}function E(t){const n=JSON.stringify(t);return`interface=${e.encode(e.encode(n))}`}function J(){const e=function(e,t,n={}){const{window:r=C}=n;return L(e,t,null==r?void 0:r.localStorage,n)}("SA-ZHKQ-USERINFO",null);return d(()=>e.value?JSON.parse(e.value):null)}const M=t.create({baseURL:"https://rollcall.anlaxy.com.cn/SerApi/v02",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),P=t.create({baseURL:"/PairAPI",headers:{"Content-Type":"application/x-www-form-urlencoded"}});async function T(e,t={}){const n=E({CommType:"utils",Comm:e,Param:{Source_PlatForm:2,...t}});try{return(await M.post("",n)).data}catch(r){throw r}}async function R(e,t={}){const n=E({CommType:"utils",Comm:e,Param:{Source_PlatForm:2,...t}});try{return(await P.post("",n)).data}catch(r){throw r}}async function K(e){return T("Member_Login",e)}async function G(e){return T("RollCall_SourceListDay",e)}async function x(e){return T("RollCall_SourceSignList",e)}async function U(e){return T("RollCall_SignInSource",e)}async function V(e){return T("RollCall_SignOutSource",e)}async function W(e){return R("Member_Get_Class",{userKey:e})}async function Z(e,t){return R("Member_Get_Group",{userKey:e,group_id:t})}async function $(e,t,n,r,a,o){return R("Supplement_Class_Anomaly",{userKey:e,pk_user:t,pk_class:n,pk_lesson:"",type:r,startDate:a,endDate:o})}async function z(e,t,n,r,a,o,s){return R("Supplement_Lesson_User",{userKey:e,pk_user:r,pk_class:t,pk_lesson:n,type:a,startDate:o,endDate:s})}async function H(e,t,n,r,a,o,s){return T("Supplement_LessonSignDetail",{userKey:e,classpk:t,source_code:n,user_code:r,type:a,start:o,end:s})}export{K as Z,G as a,x as b,Z as c,$ as d,z as e,H as f,W as g,J as h,U as i,V as j};
